<ion-header class="ion-no-border py-2 px-3 bg-gradient-to-b from-gray-400" [translucent]="true">
  <ion-toolbar color="primary rounded">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="tabs"></ion-back-button>
    </ion-buttons>
    <ion-title>
      <img src="{{currentPartner && currentPartner.logo ? currentPartner.logo : ''}}" class="inline-block h-9" alt="logo"/>
      Partner
    </ion-title>
    <ion-buttons slot="end">
      <ion-button>
        <ng-container>
          <svg (click)="likeCurrentPartner()" *ngIf="currentUser && !currentUser.favoritePartner.includes(currentPartner.id)" xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 inline-flex" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1">
            <path stroke-linecap="round" stroke-linejoin="round" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
          </svg>
          <svg (click)="likeCurrentPartner()" *ngIf="currentUser && currentUser.favoritePartner.includes(currentPartner.id)" xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-red-500 inline-flex" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd" />
          </svg>
        </ng-container>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="px-3 pb-1 pt-2">
    <p class="text-3xl font-bold">{{currentPartner ? currentPartner.name : '...'}}</p>
  </div>

  <section *ngIf="currentPartner && currentPartner.description" class="px-3 pb-1 pt-2">
    <div class="mb-3">
      <p class="text-xl font-bold">Description</p>
    </div>
    <div class="px-3 py-3" *ngIf="currentPartner" [innerHTML]="currentPartner.description"></div>
  </section>

  <section class="px-3 pb-1 pt-2" *ngIf="cashers.length > 0">
    <div class="mb-3">
      <p class="text-xl font-bold">Boxes available</p>
    </div>

    <div class="border-t-4 border-yellow-400 max-w-sm bg-white rounded-lg shadow-md">
      <div class="p-5 rounded-b-lg" style="background-color: #202020">
        <a class="flex mb-2 text-base font-bold tracking-tight text-white dark:text-white">
          Cashiers
        </a>
        <div class="mb-3 font-normal text-sm text-gray-200">
          <form #form="ngForm">
            <select ngModel="" (ngModelChange)="updateIdentifiant($event)" name="casher" id="casher" class="bg-gray-50 border-t-4 border-yellow-400 text-gray-900 text-sm rounded-lg focus:ring-yellow-500 focus:border-yellow-500 block w-full p-2.5">
              <option selected value="">Choose your case</option>
              <option value="{{i}}" *ngFor="let casher of cashers; let i = index">{{casher.name}}</option>
            </select>
          </form>
        </div>
        <p class="mb-3" *ngIf="currentCasher">
          <input (ngModelChange)="calculResult($event)" ngModel  type="number" id="imput_montant" class="bg-gray-50 shadow border-t-4 border-yellow-400 text-gray-900 text-sm rounded-lg block w-full p-2.5" placeholder="1234" required>
        </p>
        <a *ngIf="currentCasher" href="tel:{{montane === 0 ? currentCasher.code : currentCasher.code.toString().slice(0,-1) + '*' + montane + '#'}}" class="inline-flex items-center bg-yellow-400 text-gray-900 py-2 px-3 text-sm font-medium text-center rounded-lg hover:bg-yellow-400 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">
          <svg aria-hidden="true" class="mr-2 -mr-1 w-4 h-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z" />
          </svg> &nbsp; &nbsp;
          <span>{{montane === 0 ? currentCasher.code : currentCasher.code.toString().slice(0,-1) + '*' + montane + '#'}}</span>
        </a>
      </div>
    </div>
  </section>
</ion-content>
